<!DOCTYPE html>
<html>
<head>
<title>Page Title</title>
</head>
<script>
    function map_range(value, low1, high1, low2, high2) {
    return low2 + (high2 - low2) * (value - low1) / (high1 - low1);
}
function myFunction(ele){
    console.log(ele.id+" changed");
    let solariMaxHealth = document.getElementById('solari-max-health').value;
    let solariCurrHealth = document.getElementById('solari-curr-health').value;
    let healthRatio = (solariCurrHealth/solariMaxHealth)*100;
    let healthLedOn = Math.round(map_range(healthRatio, 0, 100, 0, 64));
    console.log(healthLedOn);
    document.getElementById('solari-health-bar').style.width= ""+(healthRatio)+"%";
    fetch("http://192.168.1.164/json/state",{
        method: "POST",
        body: JSON.stringify({
            "seg":{
                "i":[
                    0,healthLedOn,"FF0000",
                    healthLedOn,64,"000000"
                ]}
        }),
        headers:{
            "Content-type": "application/json"
        }
    });
}
</script>
<body>

<h1>This is a Heading</h1>
<p>This is a paragraph.</p>

<!-- <form action="/action_page.php"> -->
    <div style="font-size: 32px;">
    <label for="fname">Solari Current Health</label><br>
    <input style='font-size: 32px' onchange="myFunction(this)" type="number" id="solari-curr-health" value="50" min="0"><br>
    <label for="fname">Solari Max Health</label><br>
    <input style='font-size: 32px' onchange="myFunction(this)" type="number" id="solari-max-health" value="50" min="0"><br>
    <div style="width:80%"><div id="solari-health-bar" style="height:30px;background-color: red;"></div></div>
    
    </div>
    <!-- <label for="lname">Jae Curr Health</label><br>
    <input onchange="myFunction(this)" type="number" id="jae-curr-health" value="50"><br>
    <label for="lname">Jae Max Health</label><br>
    <input onchange="myFunction(this)" type="number" id="jae-max-health" value="50"><br> -->
  <!-- </form>  -->

</body>
</html>